(this["webpackJsonpquick-flick-picker"]=this["webpackJsonpquick-flick-picker"]||[]).push([[0],{40:function(e,t,a){},45:function(e,t,a){e.exports=a(83)},50:function(e,t,a){},51:function(e,t,a){},62:function(e,t,a){},83:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(41),s=a.n(r),l=(a(50),a(5)),o=a(6),c=a(8),u=a(7),m=a(9),h=(a(51),a(26)),v=a.n(h);a(61);v.a.initializeApp({apiKey:"AIzaSyAmkko3XAdO0l3amrDc4VMBv9e0xuCfEbo",authDomain:"quickflickpicker.firebaseapp.com",databaseURL:"https://quickflickpicker.firebaseio.com",projectId:"quickflickpicker",storageBucket:"quickflickpicker.appspot.com",messagingSenderId:"981312277648",appId:"1:981312277648:web:489979be7011747edd9c15"});var d=v.a,f=a(15),p=(a(62),function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).handleUserInput=function(t){e.setState({userListName:t.target.value})},e.handleUserListName=function(t){t.preventDefault();var a=e.state.usersList.find((function(t){return t.key===e.state.userListName}));if(""===e.state.userListName)alert("please enter a name for your list!");else if(a)alert("You already have a list with that name!");else{d.database().ref(e.state.userListName).push(e.state.userListName)}e.setState({userListName:""})},e.handleDeleteList=function(t){!0===window.confirm("Are you sure you want to delete list:".concat(t,"?"))&&e.state.dbRef.child(t).remove()},e.handleReload=function(e){e.preventDefault()},e.handleMovieName=function(e){var t=[];for(var a in e.info)e.info[a]!==e.key&&t.push(e.info[a]);return t},e.handleDeleteMovie=function(e,t){var a;for(var n in e.info)e.info[n]!==e.key&&e.info[n].id===t.id&&(a=n);d.database().ref(e.key).child(a).remove()},e.state={dbRef:d.database().ref(),usersList:[],userListName:"",userMovies:[]},e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.state.dbRef.on("value",(function(t){var a=t.val(),n=[];for(var i in a){var r={key:i,info:a[i]};n.push(r)}e.setState({usersList:n})}))}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"yourLists"},i.a.createElement("div",{className:"wrapper"},i.a.createElement("h2",null,"Your Lists:"),i.a.createElement("form",{className:"listInput",action:"",onSubmit:this.handleUserListName},i.a.createElement("label",{className:"labelHidden",htmlFor:"listName"},"Please enter a list name"),i.a.createElement("input",{onChange:this.handleUserInput,required:!0,type:"text",id:"listName",placeholder:"New list name",value:this.state.userListName}),i.a.createElement("button",{className:"roundButton",type:"submit"},i.a.createElement("i",{class:"fas fa-plus"}))),i.a.createElement("ul",null,this.state.usersList.map((function(t){return i.a.createElement("li",{className:"dropDownList",key:t.key},i.a.createElement("h3",null,t.key),i.a.createElement("div",{className:"movies"},i.a.createElement("a",{className:"showMovies",href:"/",onClick:e.handleReload},i.a.createElement("i",{class:"fas fa-chevron-down"})),i.a.createElement("ul",{className:"moviesDisplayed"},0===e.handleMovieName(t).length?i.a.createElement("li",null," No movies in this list"):e.handleMovieName(t).map((function(a,n){return i.a.createElement("li",{className:"listItem",key:n},i.a.createElement("p",null,a.title),i.a.createElement("button",{className:"deleteButton",onClick:function(){e.handleDeleteMovie(t,a)}},"Delete"))})))),i.a.createElement(f.b,{to:"/watch-movie/".concat(t.key)},"Watch Movie"),i.a.createElement("button",{onClick:function(){e.handleDeleteList(t.key)}},i.a.createElement("i",{class:"fas fa-trash-alt"})))})))))}}]),t}(n.Component)),k=a(16),b=a.n(k),E=(a(40),function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;"undefined"!=typeof this.props.movieID&&b()({url:"https://api.themoviedb.org/3/movie/".concat(this.props.movieID),params:{api_key:"8341ba99fae06408554c7e8411e4a4f9"}}).then((function(t){var a=t.data;e.props.movieDetails(a)}))}},{key:"render",value:function(){return null}}]),t}(n.Component)),y=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).handleReload=function(e){e.preventDefault()},e.checkIfMovieExist=function(e,t){var a=[];return e.on("value",(function(e){var t=e.val();for(var n in t)"list 3"!==t[n]&&a.push(t[n].id)})),console.log(a),a.indexOf(t)>-1},e.clickHandler=function(t){t.preventDefault();var a=d.database().ref(t.target.text),n=e.state.movieDetails;if(e.checkIfMovieExist(a,n.id))alert("The movie is already in the list");else{var i=n.genres.map((function(e){return e.name})),r={id:n.id,title:n.title,runtime:n.runtime,genre:i};a.push(r)}},e.getMovieDetails=function(t){e.setState({movieDetails:t})},e.state={userLists:[],movieDetails:null},e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;d.database().ref().on("value",(function(t){var a=t.val(),n=[];for(var i in a){var r={key:i};n.push(r)}e.setState({userLists:n})}))}},{key:"render",value:function(){var e=this,t=this.state.userLists;return i.a.createElement("div",{className:"addToLists"},i.a.createElement("div",{className:"listMenu"},i.a.createElement("a",{href:"/",onClick:this.handleReload},i.a.createElement("span",{"aria-hidden":"true"},"+")),i.a.createElement("ul",{className:"listSubMenu"},t.map((function(t,a){return i.a.createElement("li",{key:a},i.a.createElement(E,{movieID:e.props.movieId,movieDetails:e.getMovieDetails}),i.a.createElement("a",{href:"/",onClick:e.clickHandler},t.key))})))))}}]),t}(n.Component),g=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).handleKeyword=function(t){e.setState({keyword:t.target.value})},e.handleSubmit=function(t){t.preventDefault();var a=[];b()({url:"https://api.themoviedb.org/3/search/movie",params:{api_key:"8341ba99fae06408554c7e8411e4a4f9",query:e.state.keyword}}).then((function(t){var n=t.data.results.map((function(e){return b()({url:"https://api.themoviedb.org/3/movie/".concat(e.id),params:{api_key:"8341ba99fae06408554c7e8411e4a4f9"}}).then((function(e){var t=e.data;a.push(t)}))}));Promise.all(n).then((function(){var t=a.filter((function(e){return null!=e.poster_path&&e.genres.length>0&&null!==e.runtime}));e.setState({movies:t},(function(){0===e.state.movies.length&&alert("No available titles")}))}))}))},e.state={keyword:"",movies:[]},e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return i.a.createElement("div",null,0===this.state.movies.length?i.a.createElement("div",null,i.a.createElement("h1",null,"quick flick picker"),i.a.createElement("form",{action:"",onSubmit:this.handleSubmit},i.a.createElement("label",{htmlFor:"keywordInput",className:"visuallyHidden"},"enter a keyword to search for a movie"),i.a.createElement("input",{type:"text",id:"keywordInput",required:!0,onChange:this.handleKeyword,value:this.state.keyword,placeholder:"Search for a movie..."}),i.a.createElement("button",{type:"submit"},"find movie"))):i.a.createElement("ul",null,this.state.movies.map((function(e){return i.a.createElement("li",{key:e.id,className:"moviePoster"},i.a.createElement(y,{movieId:e.id}),i.a.createElement(f.b,{key:e.id,to:"/movies/".concat(e.id)},i.a.createElement("img",{src:"http://image.tmdb.org/t/p/w500/".concat(e.poster_path),alt:e.title})))}))))}}]),t}(n.Component),D=a(17),N=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).componentDidMount=function(){var t;t="undefined"==typeof e.props.movieId?e.props.match.params.movieID:e.props.movieId,e.setState({movieId:t}),b()({url:"https://api.themoviedb.org/3/movie/".concat(t,"/credits"),params:{api_key:"8341ba99fae06408554c7e8411e4a4f9"}}).then((function(t){var a=t.data,n=a.crew.filter((function(e){return"Director"===e.job})),i=a.cast.filter((function(e,t){return t<=4}));e.setState({directors:n,cast:i})})),b()({url:"https://api.themoviedb.org/3/movie/".concat(t,"/videos"),params:{api_key:"8341ba99fae06408554c7e8411e4a4f9"}}).then((function(t){var a=t.data;void 0!==a.results[0]?e.setState({videoLink:"https://www.youtube.com/embed/".concat(a.results[0].key)}):e.setState({videoLink:null})}))},e.getMovieDetails=function(t){e.setState({movieDetails:t,movieGenre:t.genres})},e.componentWillUnmount=function(){e.setState({isMounted:!1})},e.state={movieDetails:{},movieGenre:[],credits:{},directors:[],cast:[],videoLink:"",movieId:""},e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return i.a.createElement("section",{className:"movieDetails"},""!==this.state.movieId?i.a.createElement("div",null,i.a.createElement(y,{movieId:this.state.movieId}),i.a.createElement(E,{movieDetails:this.getMovieDetails,movieID:this.state.movieId})):null,i.a.createElement(f.b,{to:"/"},"Back to results"),i.a.createElement("div",null,i.a.createElement("img",{src:"http://image.tmdb.org/t/p/w500/".concat(this.state.movieDetails.poster_path),alt:""})),i.a.createElement("div",null,i.a.createElement("h1",null,this.state.movieDetails.title),i.a.createElement("div",{className:"genres"},i.a.createElement("h2",null,"Genres"),this.state.movieGenre.map((function(e,t){return i.a.createElement("p",{key:t},e.name)}))),i.a.createElement("div",{className:"director"},i.a.createElement("h2",null,"Director"),this.state.directors.map((function(e){return i.a.createElement("p",{key:e.credit_id},e.name)}))),i.a.createElement("div",{className:"cast"},i.a.createElement("h2",null,"Cast"),this.state.cast.map((function(e){return i.a.createElement("p",{key:e.credit_id},e.name)})))),i.a.createElement("div",{className:"description"},i.a.createElement("h2",null,"Description"),i.a.createElement("p",null,this.state.movieDetails.overview)),null===this.state.videoLink?null:i.a.createElement("a",{className:"watchVideo",target:"_blank",rel:"noopener noreferrer",href:this.state.videoLink},"Watch Trailer"))}}]),t}(n.Component),L=a(44),w=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).getGenres=function(){var t=[];e.state.ListMovies.forEach((function(e){e.name.genre.forEach((function(e){t.push(e)}))}));var a=t.filter((function(e,a){return t.indexOf(e)===a}));e.setState({listGenres:a})},e.getInfo=function(){var t=d.database().ref(e.props.match.params.listName),a=[];t.on("value",(function(t){var n=t.val();for(var i in n)if(n[i]!==e.props.match.params.listName){var r={key:i,name:n[i]};a.push(r)}e.setState({ListMovies:a},(function(){e.getGenres()}))}))},e.handleSubmit=function(t){t.preventDefault();var a=e.state.selectedGenre;if(""!==e.state.selectedTime&&""!==a){var n=e.state.ListMovies,i=parseInt(e.state.selectedTime),r=n.filter((function(e){return parseInt(e.name.runtime)<=i&&e.name.genre.indexOf(a)>=0}));if(0===r.length)alert("No matches in this list.");else{var s=Math.floor(Math.random()*r.length);e.setState({movieToWatch:r[s].name.id})}}else""===a?alert("Please select a genre!"):alert("Please select a time!")},e.handleChange=function(t){var a=t.target.id,n=t.target.value;e.setState(Object(L.a)({},a,n))},e.state={ListMovies:[],listGenres:[],selectedGenre:"",selectedTime:"",movieToWatch:"",listName:""},e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillReceiveProps",value:function(){this.getInfo()}},{key:"componentDidMount",value:function(){this.getInfo()}},{key:"render",value:function(){return console.log(this.props.specificList),""===this.state.movieToWatch?i.a.createElement("section",null,i.a.createElement("h1",null,"watch a movie"),i.a.createElement("form",{action:"",onSubmit:this.handleSubmit},i.a.createElement("p",null,"I feel like watching a "),i.a.createElement("select",{id:"selectedGenre",onChange:this.handleChange},i.a.createElement("option",{value:""},"Select a genre"),this.state.listGenres.map((function(e,t){return i.a.createElement("option",{value:e,key:t},e)}))),i.a.createElement("p",null," movie and I have "),i.a.createElement("select",{id:"selectedTime",onChange:this.handleChange},i.a.createElement("option",{value:""},"Select a movie length"),i.a.createElement("option",{value:"90"},"Less than 1.5 hours"),i.a.createElement("option",{value:"120"},"Less than 2 hours"),i.a.createElement("option",{value:"240"},"All the time in the world ")),i.a.createElement("button",{type:"submit"},"find movie"))):i.a.createElement(N,{movieId:this.state.movieToWatch})}}]),t}(n.Component),O=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).handleGetLists=function(t){e.setState({userLists:t})},e.handleGetSpecificList=function(t){console.log(t.key),e.setState({specificList:t.key})},e.state={userLists:[],specificList:""},e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return i.a.createElement(f.a,null,i.a.createElement("div",{className:"App"},i.a.createElement(p,{updateParentListFunc:this.handleGetLists}),i.a.createElement(D.a,{path:"/quickFlickPicker25",component:g}),i.a.createElement(D.a,{path:"/quickFlickPicker25/movies/:movieID",exact:!0,component:N}),i.a.createElement(D.a,{path:"/quickFlickPicker25/watch-movie/:listName",exact:!0,component:w})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[45,1,2]]]);
//# sourceMappingURL=main.a63b6fa7.chunk.js.map